{"is_source_file": true, "format": "TypeScript", "description": "This file defines a module for creating and managing a singleton Axios HTTP client instance with request interceptors for handling authorization tokens and tenant context. It provides functions to get the API instance and to reset it, incorporating environment-based configuration.", "external_files": ["../store/auth", "../store/tenant", "axios"], "external_methods": ["useAuthStore.getState().token", "useAuthStore.getState().logout()", "useTenantStore.getState().selectedTenantId"], "published": ["api", "resetApiInstance"], "classes": [], "methods": [{"name": "function createInstance(): AxiosInstance { createInstance", "description": "Creates and configures an AxiosInstance with base URL, timeout, headers, request and response interceptors for authentication and tenant context handling.", "scope": "", "scopeKind": ""}, {"name": "export function api(): AxiosInstance { api", "description": "Returns a singleton AxiosInstance, creating it if necessary.", "scope": "", "scopeKind": ""}, {"name": "export function resetApiInstance(): void { resetApiInstance", "description": "Resets the singleton AxiosInstance to null, allowing re-creation.", "scope": "", "scopeKind": ""}], "calls": ["axios.create", "ax.interceptors.request.use", "ax.interceptors.response.use", "useAuthStore.getState", "useTenantStore.getState"], "search-terms": ["AxiosInstance", "axios interceptors", "auth token injection", "tenant header", "singleton Axios client"], "state": 2, "file_id": 34, "knowledge_revision": 177, "git_revision": "be4492d7a5c565b42d01595db152d8b53f8224b1", "revision_history": [{"73": "6590bfa06afc3693b6cdd76a1680213beba9d0d9"}, {"177": "be4492d7a5c565b42d01595db152d8b53f8224b1"}], "ctags": [{"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^export function api(): AxiosInstance {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ax", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^  const ax = axios.create({$/", "language": "TypeScript", "kind": "constant", "scope": "createInstance", "scopeKind": "function"}, {"_type": "tag", "name": "baseURL", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^const baseURL = import.meta.env.VITE_API_BASE_URL || 'http:\\/\\/localhost:8080';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "createInstance", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^function createInstance(): AxiosInstance {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "instance", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^let instance: AxiosInstance | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "resetApiInstance", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^export function resetApiInstance(): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "tenantId", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^    const tenantId = useTenantStore.getState().selectedTenantId;$/", "language": "TypeScript", "kind": "constant", "scope": "createInstance", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/FrontendContainer/src/services/api.ts", "pattern": "/^    const token = useAuthStore.getState().token;$/", "language": "TypeScript", "kind": "constant", "scope": "createInstance", "scopeKind": "function"}], "hash": "a27f01de16146c23bd34ce9f21529d15", "format-version": 4, "code-base-name": "DatabaseContainer", "filename": "FrontendContainer/src/services/api.ts", "fields": [{"name": "let instance: AxiosInstance | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}