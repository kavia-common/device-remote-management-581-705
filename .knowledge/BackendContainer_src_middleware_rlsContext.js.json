{"is_source_file": true, "format": "JavaScript", "description": "This file defines middleware for setting PostgreSQL Row-Level Security (RLS) context variables for multi-tenant isolation in a Node.js application, attaching user-specific session variables and managing database client lifecycle.", "external_files": ["req", "res", "next", "req.app", "pool.connect", "client.query", "client.release", "console.error", "res.status", "res.json"], "external_methods": ["req.app.get", "pool.connect", "client.query", "client.release", "res.on", "res.status", "res.json"], "published": ["setRLSContext"], "classes": [], "methods": [{"name": "setRLSContext", "description": "Middleware function to set PostgreSQL RLS context variables for the current request, managing database connection and attaching it to the request object."}], "calls": ["pool.connect", "client.query", "client.release", "res.on", "next", "console.error", "res.status", "res.json"], "search-terms": ["middleware", "PostgreSQL RLS", "multi-tenant", "session variables", "setRLSContext"], "state": 2, "file_id": 32, "knowledge_revision": 82, "git_revision": "85b189065008d26a55883aaacacc5cd9e3c4167c", "ctags": [{"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/rlsContext.js", "pattern": "/^    const client = await pool.connect();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/rlsContext.js", "pattern": "/^  const pool = req.app.get('db');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRLSContext", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/rlsContext.js", "pattern": "/^const setRLSContext = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRLSContext", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/rlsContext.js", "pattern": "/^module.exports = { setRLSContext };$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}], "hash": "8d0f5595eebbdbf42d718b0a6e6396ae", "format-version": 4, "code-base-name": "DatabaseContainer", "filename": "BackendContainer/src/middleware/rlsContext.js", "fields": [{"name": "module.exports = { setRLSContext };", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"82": "85b189065008d26a55883aaacacc5cd9e3c4167c"}]}