{"is_source_file": true, "format": "Python", "description": "This file defines a middleware class for a FastAPI application that extracts tenant and user IDs from JWT tokens and attaches them to the request's state.", "external_files": ["src.security.auth"], "external_methods": ["decode_token"], "published": ["TenantContextMiddleware"], "classes": [{"name": "TenantContextMiddleware", "description": "Middleware class that decodes JWT tokens and attaches tenant and user IDs to the request context."}], "methods": [{"name": "Optional[str] _extract_bearer_token(auth_header: Optional[str])", "description": "Extracts the Bearer token from the Authorization header.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[str],Optional[str]] _extract_ids_from_claims(claims: dict)", "description": "Extracts tenant_id and user_id from JWT claims.", "scope": "", "scopeKind": ""}, {"name": "dispatch(self, request: Request, call_next)", "description": "Asynchronous method that processes incoming requests, decodes the JWT, and sets tenant/user IDs in request.state.", "scope": "TenantContextMiddleware", "scopeKind": "class"}], "calls": ["decode_token", "request.headers.get", "_extract_bearer_token", "_extract_ids_from_claims", "call_next"], "search-terms": ["TenantContextMiddleware", "JWT token extraction", "FastAPI middleware", "decode_token usage", "request.state.tenant_id", "request.state.user_id"], "state": 2, "file_id": 48, "knowledge_revision": 106, "git_revision": "a3340ba1fe927e9a80de5ea4191e792d23a7ff31", "ctags": [{"_type": "tag", "name": "TenantContextMiddleware", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/tenant_context.py", "pattern": "/^class TenantContextMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_extract_bearer_token", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/tenant_context.py", "pattern": "/^def _extract_bearer_token(auth_header: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(auth_header: Optional[str])"}, {"_type": "tag", "name": "_extract_ids_from_claims", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/tenant_context.py", "pattern": "/^def _extract_ids_from_claims(claims: dict) -> Tuple[Optional[str], Optional[str]]:$/", "language": "Python", "typeref": "typename:Tuple[Optional[str],Optional[str]]", "kind": "function", "signature": "(claims: dict)"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/middleware/tenant_context.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "TenantContextMiddleware", "scopeKind": "class"}], "hash": "723bb243c79ecddaf9638bbe377327b9", "format-version": 4, "code-base-name": "DatabaseContainer", "filename": "BackendContainer/src/middleware/tenant_context.py", "revision_history": [{"106": "a3340ba1fe927e9a80de5ea4191e792d23a7ff31"}]}