{"is_source_file": true, "format": "bash", "description": "A shell script for managing database migrations for a PostgreSQL-based system. It includes commands to create schema, enable row-level security, create indexes, and seed initial data, all executed via psql with connection details read from a configuration file.", "external_files": ["db_connection.txt"], "external_methods": ["head", "tr -d", "echo", "sed", "set_config", "current_setting", "gen_random_uuid"], "published": [], "classes": [], "methods": [{"name": "exec_sql", "description": "Executes a given SQL statement with a preview output, using the connection command read from the configuration file."}, {"name": "apply_schema", "description": "Creates database tables and extensions necessary for the application, including schema setup."}, {"name": "apply_rls", "description": "Enables row level security and creates policies for multi-tenant isolation on tables."}, {"name": "apply_indexes", "description": "Creates indexes to optimize query performance on key columns."}, {"name": "apply_seeds", "description": "Seeds the database with initial default data such as tenant, admin user, device, protocols, and sample records."}, {"name": "show_plan", "description": "Displays the overall plan of migration steps for documentation."}], "calls": ["${PSQL_CMD} -v ON_ERROR_STOP=1 -c", "head", "tr -s", "sed", "set_config", "current_setting", "gen_random_uuid", "echo", "exec_sql", "show_plan"], "search-terms": ["migrate.sh", "PostgreSQL schema", "row level security", "tenant isolation", "database seed", "SQL migrations"], "state": 2, "file_id": 39, "knowledge_revision": 82, "git_revision": "1c6578ef1330e2d58d3e7c5921f9c285769a22a8", "hash": "4e050d618ec2d2fca877ded5629d6e93", "format-version": 4, "code-base-name": "DatabaseContainer", "filename": "DatabaseContainer/migrate.sh", "revision_history": [{"82": "1c6578ef1330e2d58d3e7c5921f9c285769a22a8"}]}