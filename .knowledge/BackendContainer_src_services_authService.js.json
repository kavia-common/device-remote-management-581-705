{"is_source_file": true, "format": "JavaScript", "description": "This file defines an AuthService class that manages user registration, login, token refresh, logout, and token verification for authentication purposes. It interacts with a database pool, uses bcryptjs for password hashing, jsonwebtoken for JWT handling, and uuid for unique identifier generation.", "external_files": ["bcryptjs", "jsonwebtoken", "uuid"], "external_methods": ["bcrypt.hash", "bcrypt.compare", "jwt.sign", "jwt.verify"], "published": ["AuthService"], "classes": [{"name": "AuthService", "description": "A service class providing authentication functionalities such as user registration, login, token refresh, logout, and token verification."}], "methods": [{"name": "register(userData)", "description": "Registers a new user by hashing the password and inserting user data into the database.", "scope": "AuthService", "scopeKind": "class"}, {"name": "login(email, password, ipAddress, userAgent)", "description": "Authenticates user credentials, generates JWT tokens, creates session records, and updates user activity.", "scope": "AuthService", "scopeKind": "class"}, {"name": "refreshToken(refreshToken)", "description": "Validates a refresh token and issues a new access token, updating the session record.", "scope": "AuthService", "scopeKind": "class"}, {"name": "logout(token)", "description": "Invalidates the session associated with the provided access token.", "scope": "AuthService", "scopeKind": "class"}, {"name": "verifyAccessToken(token)", "description": "Verifies an access token and returns the embedded user data.", "scope": "AuthService", "scopeKind": "class"}, {"name": "generateAccessToken(user)", "description": "Creates a new JWT access token for a user.", "scope": "AuthService", "scopeKind": "class"}, {"name": "generateRefreshToken(user)", "description": "Creates a new JWT refresh token for a user.", "scope": "AuthService", "scopeKind": "class"}, {"name": "parseTimeToMs(timeStr)", "description": "Converts a time string (e.g., '15m') into milliseconds.", "scope": "AuthService", "scopeKind": "class"}, {"name": "constructor(pool)", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}], "calls": ["bcrypt.hash", "bcrypt.compare", "jwt.sign", "jwt.verify", "this.pool.query", "this.generateAccessToken", "this.generateRefreshToken"], "search-terms": ["authService", "register", "login", "refreshToken", "logout", "verifyAccessToken", "JWT_SECRET", "JWT_REFRESH_SECRET"], "state": 2, "file_id": 29, "knowledge_revision": 77, "git_revision": "85b189065008d26a55883aaacacc5cd9e3c4167c", "ctags": [{"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^class AuthService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "JWT_EXPIRES_IN", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^const JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || '15m';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "JWT_REFRESH_EXPIRES_IN", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^const JWT_REFRESH_EXPIRES_IN = process.env.JWT_REFRESH_EXPIRES_IN || '7d';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "JWT_REFRESH_SECRET", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^const JWT_REFRESH_SECRET = process.env.JWT_REFRESH_SECRET || 'your-refresh-secret-change-in-prod/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "JWT_SECRET", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^const JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key-change-in-production';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bcrypt", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^const bcrypt = require('bcryptjs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  constructor(pool) {$/", "language": "JavaScript", "kind": "method", "signature": "(pool)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^    const units = { s: 1000, m: 60000, h: 3600000, d: 86400000 };$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.parseTimeToMs.units", "scopeKind": "class"}, {"_type": "tag", "name": "generateAccessToken", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  generateAccessToken(user) {$/", "language": "JavaScript", "kind": "method", "signature": "(user)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "generateRefreshToken", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  generateRefreshToken(user) {$/", "language": "JavaScript", "kind": "method", "signature": "(user)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^    const units = { s: 1000, m: 60000, h: 3600000, d: 86400000 };$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.parseTimeToMs.units", "scopeKind": "class"}, {"_type": "tag", "name": "jwt", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^const jwt = require('jsonwebtoken');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  async login(email, password, ipAddress, userAgent) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password, ipAddress, userAgent)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  async logout(token) {$/", "language": "JavaScript", "kind": "method", "signature": "(token)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "m", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^    const units = { s: 1000, m: 60000, h: 3600000, d: 86400000 };$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.parseTimeToMs.units", "scopeKind": "class"}, {"_type": "tag", "name": "parseTimeToMs", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  parseTimeToMs(timeStr) {$/", "language": "JavaScript", "kind": "method", "signature": "(timeStr)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "refreshToken", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  async refreshToken(refreshToken) {$/", "language": "JavaScript", "kind": "method", "signature": "(refreshToken)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  async register(userData) {$/", "language": "JavaScript", "kind": "method", "signature": "(userData)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^    const units = { s: 1000, m: 60000, h: 3600000, d: 86400000 };$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.parseTimeToMs.units", "scopeKind": "class"}, {"_type": "tag", "name": "units", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^    const units = { s: 1000, m: 60000, h: 3600000, d: 86400000 };$/", "language": "JavaScript", "kind": "class", "scope": "AuthService.parseTimeToMs", "scopeKind": "class"}, {"_type": "tag", "name": "verifyAccessToken", "path": "/home/kavia/workspace/code-generation/device-remote-management-581-705/BackendContainer/src/services/authService.js", "pattern": "/^  verifyAccessToken(token) {$/", "language": "JavaScript", "kind": "method", "signature": "(token)", "scope": "AuthService", "scopeKind": "class"}], "hash": "613b9d776de6a53dd96575f20f8c8e9a", "format-version": 4, "code-base-name": "DatabaseContainer", "filename": "BackendContainer/src/services/authService.js", "fields": [{"name": "const units = { s: 1000, m: 60000, h: 3600000, d: 86400000 };", "scope": "AuthService.parseTimeToMs.units", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"77": "85b189065008d26a55883aaacacc5cd9e3c4167c"}]}